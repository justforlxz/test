---
title: 我的代理折腾方案
date: 2017-08-31 20:43:48
tags: linux
---

最近在准备做新的代理设置界面，然后想到自己也改改代理的配置，好方便的用在新的设置上。

<!-- more -->

我以前的旧方案是：

privoxy --> nginx --> 多个ss客户端 ==== 多个ss服务端

privoxy用来将socks转成http，nginx是用来多个ss负载均衡。

这个方案虽然有点麻烦，但是用起来还是很吼的。

但是我们改了控制中心对代理的设置，在程序前面加上了proxychains。
刚好可以和我的privoxy在作用上冲突了。但是其实还有一些其他问题，我是比较懒的人，跳过大陆ip和局域网对我来说是有很大帮助的，这样我就可以设置一个全局代理，而不需要给每个程序单独设置。

以前肥猫给我介绍过一些方法，当初我弄的时候，还是太图样，总是不能好好的稳定工作，所以暂时放弃了全局代理的方案。provixy其实是可以做这样的事，但是好麻烦，要自己添加很多规则，gfwlist是可以转成它支持的action，但是自己再添加的话，很麻烦。【而我是根比较懒的竹子

今天把provixy给撤下来了，换上以前用的meow，是用go写的，作用也是转成http，但是它支持的方案比较多，可以直接添加ss，也可以正向代理。当初不用它的原因是我想随机使用一个代理，当时电信和我过不去，一个端口用久了，就封我一天，害得我早上到公司了，先远程到服务器改端口，后来又觉得麻烦，直接开了5个端口，每天改本机，再后来就想随机使用了…  【还有次把我的ssh端口封了一天…

现在的话，就是变成了这个结构：

meow --> nginx --> 多个ss客户端 ==== 多个ss服务端

nginx还是代替meow做负载均衡，meow的工作就变成了转成http代理和黑白名单。

虽然不需要新的控制中心的代理方案，现在这套就工作的很好了，但是没有它，我就不会再折腾新的【笑哭